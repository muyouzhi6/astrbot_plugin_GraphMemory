import{d as C,r as c,h as a,i as e,q as m,l as f,v as x,H as V,D as F,t as l,F as S,C as q,x as B,f as o}from"./vendor-vue-BVRAD2HG.js";import{a as k}from"./client-CMhDoEMr.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-B9ygI19o.js";const b={hybrid:d=>k.post("/search/hybrid",d),vector:d=>k.post("/search/vector",d),keyword:d=>k.post("/search/keyword",d)},K={class:"search-view"},M={class:"view-content"},U={class:"search-form card"},L={class:"form-group"},N={class:"form-row"},z={class:"form-group"},A={class:"form-group"},E=["disabled"],H={key:0,class:"results-section"},I={key:0,class:"loading"},R={key:1,class:"error"},T={key:2,class:"empty"},$={key:3,class:"results-list"},j={class:"result-header"},G={class:"result-description"},J={class:"result-meta"},O={key:0,class:"meta-item"},P={key:1,class:"meta-item"},Q={key:2,class:"meta-item"},W={class:"meta-item"},X={key:4,class:"formatted-text card"},Y=C({__name:"SearchView",setup(d){const u=c(""),y=c("hybrid"),_=c(7),v=c(!1),p=c(""),n=c(null),w=async()=>{var h,s;if(u.value.trim()){v.value=!0,p.value="";try{const i={query:u.value,top_k:_.value};let r;y.value==="hybrid"?r=await b.hybrid(i):y.value==="vector"?r=await b.vector(i):r=await b.keyword(i),r.success?n.value=r.data:p.value=r.message||"搜索失败"}catch(i){p.value=((s=(h=i.response)==null?void 0:h.data)==null?void 0:s.message)||"搜索失败",console.error(i)}finally{v.value=!1}}};return(h,s)=>{var i,r;return o(),a("div",K,[s[8]||(s[8]=e("div",{class:"view-header"},[e("h2",null,"搜索测试")],-1)),e("div",M,[e("div",U,[e("div",L,[s[3]||(s[3]=e("label",null,"查询文本",-1)),f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),type:"text",class:"input",placeholder:"输入搜索关键词...",onKeyup:V(w,["enter"])},null,544),[[x,u.value]])]),e("div",N,[e("div",z,[s[5]||(s[5]=e("label",null,"搜索模式",-1)),f(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>y.value=t),class:"select"},[...s[4]||(s[4]=[e("option",{value:"hybrid"},"混合搜索",-1),e("option",{value:"vector"},"向量搜索",-1),e("option",{value:"keyword"},"关键词搜索",-1)])],512),[[F,y.value]])]),e("div",A,[s[6]||(s[6]=e("label",null,"结果数量",-1)),f(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>_.value=t),type:"number",class:"input",min:"1",max:"20"},null,512),[[x,_.value,void 0,{number:!0}]])])]),e("button",{onClick:w,class:"btn btn-primary",disabled:v.value||!u.value},l(v.value?"搜索中...":"搜索"),9,E)]),n.value?(o(),a("div",H,[e("h3",null,"搜索结果 ("+l(((i=n.value.results)==null?void 0:i.length)||0)+")",1),v.value?(o(),a("div",I,"搜索中...")):p.value?(o(),a("div",R,l(p.value),1)):((r=n.value.results)==null?void 0:r.length)===0?(o(),a("div",T," 未找到匹配结果 ")):(o(),a("div",$,[(o(!0),a(S,null,q(n.value.results,(t,g)=>(o(),a("div",{key:g,class:"result-item card"},[e("div",j,[e("h4",null,l(t.entity.name),1),e("span",{class:B(["type-badge",`type-${t.entity.type.toLowerCase()}`])},l(t.entity.type),3)]),e("p",G,l(t.entity.description),1),e("div",J,[t.score!==void 0?(o(),a("span",O," 分数: "+l(t.score.toFixed(3)),1)):m("",!0),t.similarity!==void 0?(o(),a("span",P," 相似度: "+l(t.similarity.toFixed(3)),1)):m("",!0),t.match_type?(o(),a("span",Q," 匹配类型: "+l(t.match_type),1)):m("",!0),e("span",W," 重要性: "+l(t.entity.importance.toFixed(2)),1)])]))),128))])),n.value.formatted_text?(o(),a("div",X,[s[7]||(s[7]=e("h4",null,"格式化记忆文本",-1)),e("pre",null,l(n.value.formatted_text),1)])):m("",!0)])):m("",!0)])])}}}),ae=D(Y,[["__scopeId","data-v-8ec508d6"]]);export{ae as default};
