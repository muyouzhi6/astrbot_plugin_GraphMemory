# GraphMemory 插件文档

## 文档说明

本目录包含 GraphMemory 插件的设计和使用文档。

## 当前版本

**v0.5.0** - WebUI 完整实现版本

## 文档列表

### 设计文档

#### 00-设计总览.md
**概述文档**，包含插件的核心设计理念和技术架构。

**内容**:
- 设计背景和目标
- 核心改进
- 技术栈选择
- 开发计划
- 配置说明

**适合**: 快速了解整体设计

---

#### 06-人格与记忆设计.md
**人格策略文档**，设计人格切换时的记忆共享策略。

**内容**:
- AstrBot 人格机制
- 记忆共享策略对比
- 推荐方案: 分层共享
- 实现细节

**适合**: 理解人格与记忆的关系

---

### 使用文档

#### WebUI使用指南.md
**WebUI 使用手册**，详细说明 WebUI 的功能和使用方法。

**内容**:
- 技术栈介绍
- 启动和配置
- 功能说明 (登录、图谱、实体、关系、搜索、统计、系统)
- 主题切换
- 性能优化
- 故障排除
- 开发说明

**适合**: WebUI 用户和开发者

---

## 阅读顺序

### 用户使用
1. **WebUI使用指南.md** - 学习如何使用 WebUI
2. **根目录/CHANGELOG.md** - 了解最新功能

### 快速了解
1. **00-设计总览.md** - 快速了解整体设计

### 深入理解
1. **00-设计总览.md** - 理解技术架构
2. **06-人格与记忆设计.md** - 理解人格策略

## 关键特性总结

### 架构
- 记忆层次: 2层 (缓冲区 + 图谱)
- 配置项: 18个核心配置
- Schema 节点: 3种 (User, Session, Entity)
- Schema 关系: 4种 (PARTICIPATED_IN, RELATED_TO, MENTIONED_IN, KNOWS)
- 人格策略: 分层共享

### 性能优化
- 异步并发处理
- 减少 LLM 调用次数
- 缓存策略
- 批量操作

### 功能增强
- 主动记忆检索 (Function Calling)
- 实体消歧和合并
- 时间衰减机制
- 人格分层共享策略
- 完整的 WebUI ✅

## 开发进度

### ✅ 第一阶段: 核心功能
- [x] 简化 Schema 实现
- [x] 核心模块开发
- [x] 基础指令系统

### ✅ 第二阶段: 高级功能
- [x] 实体管理
- [x] 关系管理
- [x] 主动检索
- [x] 性能优化

### ✅ 第三阶段: WebUI
- [x] FastAPI 后端
- [x] Vue 3 前端框架
- [x] 图谱可视化 (Cytoscape.js)
- [x] 实体/关系管理界面
- [x] 搜索测试界面 (混合/向量/关键词)
- [x] 统计分析界面 (ECharts 图表)
- [x] 系统管理 (导入/导出/清理)

### ✅ 第四阶段: 测试和优化
- [x] 单元测试 (13个)
- [x] 集成测试 (10个)
- [x] 性能测试 (8个)
- [x] 文档完善

## WebUI 功能特性

### 已实现功能
- ✅ 图谱可视化 (Cytoscape.js)
  - 会话图谱和全局图谱切换
  - 节点大小表示重要性
  - 边宽度表示关系强度
  - 多种布局算法
  - 拖拽、缩放、搜索

- ✅ 实体管理
  - 列表、搜索、过滤
  - 查看详情、编辑、删除
  - 分页浏览

- ✅ 关系管理
  - 列表、过滤
  - 删除关系
  - 分页浏览

- ✅ 搜索测试
  - 混合搜索
  - 向量搜索
  - 关键词搜索

- ✅ 统计分析
  - 概览卡片
  - 实体类型分布饼图 (ECharts)
  - 实体创建趋势折线图 (ECharts)

- ✅ 系统管理
  - 系统状态查看
  - 图谱导出 (JSON)
  - 图谱导入 (合并/覆盖)
  - 清理低重要性实体
  - 应用时间衰减

- ✅ 主题切换
  - 明暗主题
  - 莫兰迪配色
  - 图表自动适配

## 技术栈

### 后端
- Python 3.10+
- KuzuDB (图数据库)
- SQLite (缓冲区)
- FastAPI (WebUI 后端)
- Uvicorn (ASGI 服务器)

### 前端
- Vue 3 (Composition API)
- TypeScript
- Vite
- Cytoscape.js (图谱可视化)
- ECharts (统计图表)
- Axios (HTTP 客户端)

## 联系方式

如有疑问或建议，请联系:
- **作者**: lxfight
- **项目**: astrbot_plugin_GraphMemory
- **当前版本**: v0.5.0

---

**文档版本**: 3.0
**最后更新**: 2025-12-19
**状态**: WebUI 已完成
